"use strict";!function($,t,e,s){function a(t,e){this.el=t,this.options=$.extend({},l,e),this._defaults=l,this._name=n,this.init()}var n="svgText",l={loaderHolderClass:"stext_loader",compiledClass:"st-comp",wordClass:"st-word",spaceClass:"st-space",orphanWrapClass:"st-orphan",originalTextClass:"st-original",processingClass:"st-processing",convertedClass:"st-converted",failClass:"st-failed",compiledElement:"span",wordElement:"span",spaceElement:"span",orphanWrapElement:"span",originalTextElement:"span",heightBasis:"1.15em",letterCountMap:[8,9,11,14,16]},i=[];a.prototype={init:function t(){var e=this,s=$(this.el),a=s.data("st-src");if(s.addClass(e.options.processingClass),i.indexOf(a)<0){$('<div class="'+this.options.loaderHolderClass+'">').css({height:0,overflow:"hidden"}).attr("data-src",a).appendTo("body").load(a,function(t,a){"error"==t&&s.removeClass(e.options.processingClass).addClass(e.options.failClass)}),i.push(a)}e.generateSText(e.el)},generateSText:function t(e,s){var a=this,n=$(e),l=n.data("st-src"),i=n.attr("class"),o=a.createEl(a.options.compiledElement),r=new DOMParser,p=r.parseFromString("<!doctype html><body>"+n.text(),"text/html"),d=p.body.textContent,c=d.trim().split(/[\s\t\n\r]+/),h=c.length,u=0;n.attr("data-wc",h);var g=$("."+a.options.loaderHolderClass+'[data-src="'+l+'"] svg'),m=g.data("prefix"),f=g.data("zflow")||"+";if(!g.length||!m)return void setTimeout(function(){a.generateSText(e,a.options)},50);if(o.className=a.options.compiledClass,c.forEach(function(t,e){var s=t.split(""),n=s.length,l=a.createEl(a.options.wordElement),r=h-e;"+"==f&&(r=h+e),u+=n,l.className=a.options.wordClass,l.style.zIndex=r,s.forEach(function(t,e){t=t.toUpperCase();var s=t;t.match(/[A-Z0-9]/)||(s="_x"+t.charCodeAt(0).toString(16).toUpperCase()+"_");var o="0 0 100 100",r="#"+m+"_"+s,p=g.find(r);if(p.length){o=p.attr("viewBox");var d=o.split(" ");if(d.length<3)throw"Invalid viewbox on symbol '"+t+"'";var c=d[2]/d[3],h="http://www.w3.org/2000/svg",u=a.createElNS(h,"svg");u.setAttribute("data-l",t),u.setAttribute("data-w",d[3]),u.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xlink","http://www.w3.org/1999/xlink");var C=a.createElNS(h,"use");C.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href","#"+m+"_"+s),C.setAttribute("class",i);var w=n-e;"+"==f&&(w=n+e),u.style.zIndex=w,u.style.width="calc( "+a.options.heightBasis+" * "+c+" )",u.appendChild(C),l.appendChild(u),0===e&&l.setAttribute("data-fl",t),e===n-1&&l.setAttribute("data-ll",t)}});var p=a.createEl(a.options.originalTextElement);if(p.className=a.options.originalTextClass,p.innerText=t,l.appendChild(p),o.appendChild(l),e+1<h){var d=a.createEl(a.options.spaceElement);d.setAttribute("class",a.options.spaceClass);var c=a.createEl(a.options.originalTextElement);c.className=a.options.originalTextClass,c.innerHTML="&nbsp;",d.appendChild(c),o.appendChild(d)}}),c.length>2){if(c[c.length-1].split("").length<5)o=a.wrapWords(o);else{c[c.length-2].split("").length<5&&(o=a.wrapWords(o))}}var C=0;a.options.letterCountMap.forEach(function(t,e){u>=t&&(C=e)}),n.attr("data-lcl",C).attr("data-tlc",u).html(o).removeClass(a.options.processingClass).addClass(a.options.convertedClass)},wrapWords:function t(e){var s=this,a=$(e),n=a.children().slice(-3),l=s.createEl(s.options.orphanWrapElement);return l.className=s.options.orphanWrapClass,l.setAttribute("data-fl",n.first().data("fl")),n.wrapAll(l),a},createEl:function e(s){return t.document.createElement(s)},createElNS:function e(s,a){return t.document.createElementNS(s,a)}},$.fn[n]=function(t){return this.each(function(){$.data(this,"plugin_"+n)||$.data(this,"plugin_"+n,new a(this,t))})}}(jQuery,window,document);
//# sourceMappingURL=./svgText.js.map