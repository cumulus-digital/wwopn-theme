"use strict";!function($,t,e,s){function a(t,e){this.el=t,this.options=$.extend({},i,e),this._defaults=i,this._name=n,this.init()}var n="svgText",i={loaderHolderClass:"stext_loader",compiledClass:"st-comp",wordClass:"st-word",spaceClass:"st-space",orphanWrapClass:"st-orphan",originalTextClass:"st-original",processingClass:"st-processing",convertedClass:"st-converted",failClass:"st-failed",compiledElement:"span",wordElement:"span",spaceElement:"span",letterElement:"span",orphanWrapElement:"span",originalTextElement:"span",heightBasis:"1.15em"},o=[];a.prototype={init:function t(){var e=this,s=$(this.el),a=s.data("st-src");if(s.addClass(e.options.processingClass),o.indexOf(a)<0){$('<div class="'+this.options.loaderHolderClass+'">').css({height:0,overflow:"hidden"}).attr("data-src",a).appendTo("body").load(a,function(t,a){"error"==t&&s.removeClass(e.options.processingClass).addClass(e.options.failClass)}),o.push(a)}e.generateSText(e.el)},generateSText:function t(e,s){var a=this,n=$(e),i=n.data("st-src"),o=n.attr("class"),l=a.createEl(a.options.compiledElement),r=new DOMParser,p=r.parseFromString("<!doctype html><body>"+n.text(),"text/html"),d=p.body.textContent,c=d.trim().split(/[\s\t\n\r]+/),h=c.length,m=$("."+a.options.loaderHolderClass+'[data-src="'+i+'"] svg'),C=m.data("prefix"),g=m.data("zflow")||"+";if(!m.length||!C)return void setTimeout(function(){a.generateSText(e,a.options)},50);l.className=a.options.compiledClass,c.forEach(function(t,e){var s=t.split(""),n=s.length,i=a.createEl(a.options.wordElement),r=h-e;"+"==g&&(r=h+e),i.className=a.options.wordClass,i.style.zIndex=r,s.forEach(function(t,e){t=t.toUpperCase();var s=t;t.match(/[A-Z0-9]/)||(s="_x"+t.charCodeAt(0).toString(16).toUpperCase()+"_");var l="0 0 100 100",r=m.find("#"+C+"_"+s);if(r.length){l=r.attr("viewBox");var p=l.split(" ");if(p.length<3)throw"Invalid viewbox on symbol '"+t+"'";var d=p[2]/p[3],c="http://www.w3.org/2000/svg",h=a.createElNS(c,"svg");h.setAttribute("data-letter",t),h.setAttribute("data-width",p[3]),h.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xlink","http://www.w3.org/1999/xlink");var u=a.createElNS(c,"use");u.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href","#"+C+"_"+s),u.setAttribute("class",o);var w=n-e;"+"==g&&(w=n+e),h.style.zIndex=w,h.style.width="calc( "+a.options.heightBasis+" * "+d+" )",h.appendChild(u),i.appendChild(h),0===e&&i.setAttribute("data-first_letter",t),e===n-1&&i.setAttribute("data-last_letter",t)}});var p=a.createEl(a.options.originalTextElement);if(p.className=a.options.originalTextClass,p.innerText=t,i.appendChild(p),l.appendChild(i),e+1<h){var d=a.createEl(a.options.spaceElement);d.setAttribute("class",a.options.spaceClass);var c=a.createEl(a.options.originalTextElement);c.className=a.options.originalTextClass,c.innerHTML="&nbsp;",d.appendChild(c),l.appendChild(d)}});var u=$(l),w=u.slice(-1).remove(),f=a.createEl(a.options.orphanWrapElement);f.className=a.options.orphanWrapClass,u.children().slice(-3).wrapAll(f),n.html(u).removeClass(a.options.processingClass).addClass(a.options.convertedClass)},createEl:function e(s){return t.document.createElement(s)},createElNS:function e(s,a){return t.document.createElementNS(s,a)}},$.fn[n]=function(t){return this.each(function(){$.data(this,"plugin_"+n)||$.data(this,"plugin_"+n,new a(this,t))})}}(jQuery,window,document);
//# sourceMappingURL=./svgText.js.map